From 478b84522afb2f153cce6e100431a516d6f89bf8 Mon Sep 17 00:00:00 2001
From: Eilo <eilo2518@gmail.com>
Date: Sun, 4 Mar 2012 08:18:56 -0500
Subject: [PATCH 15/25] 1.24 Absorcion Magica ajustada

---
 src/server/game/Spells/SpellInfo.cpp |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/src/server/game/Spells/SpellInfo.cpp b/src/server/game/Spells/SpellInfo.cpp
index 07ab712..4f73b87 100644
--- a/src/server/game/Spells/SpellInfo.cpp
+++ b/src/server/game/Spells/SpellInfo.cpp
@@ -414,7 +414,8 @@ int32 SpellEffectInfo::CalcValue(Unit const* caster, int32 const* bp, Unit const
             level = int32(_spellInfo->MaxLevel);
         else if (level < int32(_spellInfo->BaseLevel))
             level = int32(_spellInfo->BaseLevel);
-        level -= int32(_spellInfo->SpellLevel);
+        if (!_spellInfo->IsPassive()) // not sure if it's good for all cases, fix for Magic Absorption
+            level -= int32(_spellInfo->SpellLevel);
         basePoints += int32(level * basePointsPerLevel);
     }
 
-- 
1.7.8.msysgit.0

